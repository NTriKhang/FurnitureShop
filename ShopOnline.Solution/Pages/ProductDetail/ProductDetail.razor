@page "/ProductDetail/{Id:int}";
@using ShopOnline.Models.dtos;
@using ShopOnline.Solution.Pages.Review;
@inherits ProductDetailBase;

@if(product == null)
{
	<div class="h-100 d-flex align-items-center justify-content-center">
	  <DisplaySpinner></DisplaySpinner>
	</div>
}
else
{
	<h3 class="mb-5">Product Detail</h3>
	<div class="row mb-5">
		<div class="col-md-6">
			<img src="@product.ImageURL" class="img-thumbnail">
		</div>
		<div class="col-md-6">
			<h3>@product.Name</h3>
			<p class="mb-3">@product.Description</p>
			<p class="mb-3">
				<b>@product.Price.ToString("C")&nbsp;(@product.Qty items in stock)</b>
			</p>
			<AuthorizeView>
				<Authorized>
					<a class="btn btn-primary mb-3" @onclick="() => AddToCart_Button(new CartItemToAddDto{
																				ProductId = product.Id,
																				Qty = 1})">Add to cart</a>
				</Authorized>
			</AuthorizeView>
		</div>
	</div>
	<Review ProductId="Id"></Review>
}

